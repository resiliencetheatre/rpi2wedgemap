import{D as u,U as g}from"./app-B2omifMc.js";import{E as H}from"./ElectronUtils-C7jxrWOZ.js";import{D as P}from"./DropDownMenuItem-BwjChLsj.js";import{D as R,I as U,C as j}from"./DropDownMenu-BVbdYcZA.js";import{_ as z,e as x,o as r,q as o,k as e,A as i,D as p,B as _,t as w,j as v,f as k,y as V,H as y,S as C,x as L,T as N}from"./_plugin-vue_export-helper-BSLEAqPR.js";const q={name:"Interface",components:{DropDownMenu:R,IconButton:U,DropDownMenuItem:P},props:{iface:Object},data(){return{}},methods:{onIFACSignatureClick:function(s){u.alert(s)},isInterfaceEnabled:function(s){return g.isInterfaceEnabled(s)},enableInterface(){this.$emit("enable")},disableInterface(){this.$emit("disable")},editInterface(){this.$emit("edit")},exportInterface(){this.$emit("export")},deleteInterface(){this.$emit("delete")},formatBitsPerSecond:function(s){return g.formatBitsPerSecond(s)},formatBytes:function(s){return g.formatBytes(s)},formatFrequency(s){return g.formatFrequency(s)}}},T={class:"border rounded bg-white shadow dark:bg-zinc-800 dark:border-zinc-700"},O={key:0,class:"bg-gray-50 p-1 text-sm text-gray-500 space-x-1 border-b dark:bg-zinc-800 dark:border-zinc-700"},W={class:"flex text-sm"},X=e("div",{class:"my-auto"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"size-4 text-green-500"},[e("path",{"fill-rule":"evenodd",d:"M10 1a4.5 4.5 0 0 0-4.5 4.5V9H5a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2h-.5V5.5A4.5 4.5 0 0 0 10 1Zm3 8V5.5a3 3 0 1 0-6 0V9h6Z","clip-rule":"evenodd"})])],-1),K={class:"ml-1 my-auto"},Y={class:"text-green-500"},G={key:0},J={class:"text-purple-500"},Q={class:"flex py-2"},$={class:"my-auto mx-2"},ee={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 256 256",class:"size-6 dark:text-white"},te=e("path",{d:"M219.31,108.68l-80-80a16,16,0,0,0-22.62,0l-80,80A15.87,15.87,0,0,0,32,120v96a8,8,0,0,0,8,8h64a8,8,0,0,0,8-8V160h32v56a8,8,0,0,0,8,8h64a8,8,0,0,0,8-8V120A15.87,15.87,0,0,0,219.31,108.68ZM208,208H160V152a8,8,0,0,0-8-8H104a8,8,0,0,0-8,8v56H48V120l80-80,80,80Z"},null,-1),se=[te],ne={key:1,xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 256 256",class:"size-6 dark:text-white"},ae=e("path",{d:"M128,88a40,40,0,1,0,40,40A40,40,0,0,0,128,88Zm0,64a24,24,0,1,1,24-24A24,24,0,0,1,128,152Zm73.71,7.14a80,80,0,0,1-14.08,22.2,8,8,0,0,1-11.92-10.67,63.95,63.95,0,0,0,0-85.33,8,8,0,1,1,11.92-10.67,80.08,80.08,0,0,1,14.08,84.47ZM69,103.09a64,64,0,0,0,11.26,67.58,8,8,0,0,1-11.92,10.67,79.93,79.93,0,0,1,0-106.67A8,8,0,1,1,80.29,85.34,63.77,63.77,0,0,0,69,103.09ZM248,128a119.58,119.58,0,0,1-34.29,84,8,8,0,1,1-11.42-11.2,103.9,103.9,0,0,0,0-145.56A8,8,0,1,1,213.71,44,119.58,119.58,0,0,1,248,128ZM53.71,200.78A8,8,0,1,1,42.29,212a119.87,119.87,0,0,1,0-168,8,8,0,1,1,11.42,11.2,103.9,103.9,0,0,0,0,145.56Z"},null,-1),ie=[ae],re={key:2,xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 256 256",class:"size-6 dark:text-white"},oe=e("path",{d:"M128,24h0A104,104,0,1,0,232,128,104.12,104.12,0,0,0,128,24Zm88,104a87.61,87.61,0,0,1-3.33,24H174.16a157.44,157.44,0,0,0,0-48h38.51A87.61,87.61,0,0,1,216,128ZM102,168H154a115.11,115.11,0,0,1-26,45A115.27,115.27,0,0,1,102,168Zm-3.9-16a140.84,140.84,0,0,1,0-48h59.88a140.84,140.84,0,0,1,0,48ZM40,128a87.61,87.61,0,0,1,3.33-24H81.84a157.44,157.44,0,0,0,0,48H43.33A87.61,87.61,0,0,1,40,128ZM154,88H102a115.11,115.11,0,0,1,26-45A115.27,115.27,0,0,1,154,88Zm52.33,0H170.71a135.28,135.28,0,0,0-22.3-45.6A88.29,88.29,0,0,1,206.37,88ZM107.59,42.4A135.28,135.28,0,0,0,85.29,88H49.63A88.29,88.29,0,0,1,107.59,42.4ZM49.63,168H85.29a135.28,135.28,0,0,0,22.3,45.6A88.29,88.29,0,0,1,49.63,168Zm98.78,45.6a135.28,135.28,0,0,0,22.3-45.6h35.66A88.29,88.29,0,0,1,148.41,213.6Z"},null,-1),le=[oe],ce={key:3,xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 256 256",class:"size-6 dark:text-white"},de=e("path",{d:"M252.44,121.34l-48-32A8,8,0,0,0,192,96v24H72V72h33a32,32,0,1,0,0-16H72A16,16,0,0,0,56,72v48H8a8,8,0,0,0,0,16H56v48a16,16,0,0,0,16,16h32v8a16,16,0,0,0,16,16h32a16,16,0,0,0,16-16V176a16,16,0,0,0-16-16H120a16,16,0,0,0-16,16v8H72V136H192v24a8,8,0,0,0,12.44,6.66l48-32a8,8,0,0,0,0-13.32ZM136,48a16,16,0,1,1-16,16A16,16,0,0,1,136,48ZM120,176h32v32H120Zm88-30.95V111l25.58,17Z"},null,-1),fe=[de],ue={key:4,xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 256 256",class:"size-6 dark:text-white"},he=e("path",{d:"M128,88a40,40,0,1,0,40,40A40,40,0,0,0,128,88Zm0,64a24,24,0,1,1,24-24A24,24,0,0,1,128,152Zm73.71,7.14a80,80,0,0,1-14.08,22.2,8,8,0,0,1-11.92-10.67,63.95,63.95,0,0,0,0-85.33,8,8,0,1,1,11.92-10.67,80.08,80.08,0,0,1,14.08,84.47ZM69,103.09a64,64,0,0,0,11.26,67.58,8,8,0,0,1-11.92,10.67,79.93,79.93,0,0,1,0-106.67A8,8,0,1,1,80.29,85.34,63.77,63.77,0,0,0,69,103.09ZM248,128a119.58,119.58,0,0,1-34.29,84,8,8,0,1,1-11.42-11.2,103.9,103.9,0,0,0,0-145.56A8,8,0,1,1,213.71,44,119.58,119.58,0,0,1,248,128ZM53.71,200.78A8,8,0,1,1,42.29,212a119.87,119.87,0,0,1,0-168,8,8,0,1,1,11.42,11.2,103.9,103.9,0,0,0,0,145.56Z"},null,-1),_e=[he],me={key:5,xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 256 256",class:"size-6 dark:text-white"},ve=e("path",{d:"M72,92A12,12,0,1,1,60,80,12,12,0,0,1,72,92Zm56-12a12,12,0,1,0,12,12A12,12,0,0,0,128,80Zm68,24a12,12,0,1,0-12-12A12,12,0,0,0,196,104ZM60,152a12,12,0,1,0,12,12A12,12,0,0,0,60,152Zm68,0a12,12,0,1,0,12,12A12,12,0,0,0,128,152Zm68,0a12,12,0,1,0,12,12A12,12,0,0,0,196,152Z"},null,-1),we=[ve],ge={key:6,xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 256 256",class:"size-6 dark:text-white"},xe=e("path",{d:"M104,168a8,8,0,0,1-8,8H64a8,8,0,0,1,0-16H96A8,8,0,0,1,104,168Zm-8-40H64a8,8,0,0,0,0,16H96a8,8,0,0,0,0-16Zm0-32H64a8,8,0,0,0,0,16H96a8,8,0,0,0,0-16ZM232,80V192a16,16,0,0,1-16,16H40a16,16,0,0,1-16-16V72a8,8,0,0,1,5.7-7.66l160-48a8,8,0,0,1,4.6,15.33L86.51,64H216A16,16,0,0,1,232,80ZM216,192V80H40V192H216Zm-16-56a40,40,0,1,1-40-40A40,40,0,0,1,200,136Zm-16,0a24,24,0,1,0-24,24A24,24,0,0,0,184,136Z"},null,-1),be=[xe],ye={key:7,xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 256 256",class:"size-6 dark:text-white"},ke=e("path",{d:"M128,128a8,8,0,0,1-3,6.25l-40,32a8,8,0,1,1-10-12.5L107.19,128,75,102.25a8,8,0,1,1,10-12.5l40,32A8,8,0,0,1,128,128Zm48,24H136a8,8,0,0,0,0,16h40a8,8,0,0,0,0-16Zm56-96V200a16,16,0,0,1-16,16H40a16,16,0,0,1-16-16V56A16,16,0,0,1,40,40H216A16,16,0,0,1,232,56ZM216,200V56H40V200H216Z"},null,-1),Ie=[ke],pe={key:8,xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 256 256",class:"size-6 dark:text-white"},Ce=e("path",{d:"M140,180a12,12,0,1,1-12-12A12,12,0,0,1,140,180ZM128,72c-22.06,0-40,16.15-40,36v4a8,8,0,0,0,16,0v-4c0-11,10.77-20,24-20s24,9,24,20-10.77,20-24,20a8,8,0,0,0-8,8v8a8,8,0,0,0,16,0v-.72c18.24-3.35,32-17.9,32-35.28C168,88.15,150.06,72,128,72Zm104,56A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"},null,-1),ze=[Ce],Me={class:"font-semibold leading-5 dark:text-white"},Ae={class:"text-sm flex space-x-1 dark:text-zinc-100"},Ze={key:0},Se={key:1},Be={key:2},De={key:3},Fe={class:"ml-auto my-auto mr-2"},He={key:0,class:"inline-flex items-center rounded-full bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20"},Ve={key:1,class:"inline-flex items-center rounded-full bg-red-50 px-2 py-1 text-xs font-medium text-red-700 ring-1 ring-inset ring-red-600/20"},Ee={class:"my-auto mr-1"},Pe=e("span",{class:"flex text-gray-700 bg-gray-100 dark:bg-zinc-600 dark:text-white dark:hover:bg-zinc-700 dark:focus-visible:outline-zinc-500 hover:bg-gray-200 p-2 rounded-full"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.636 5.636a9 9 0 1 0 12.728 0M12 3v9"})])],-1),Re=[Pe],Ue=e("span",{class:"flex text-gray-700 bg-gray-100 dark:bg-zinc-600 dark:text-white dark:hover:bg-zinc-700 dark:focus-visible:outline-zinc-500 hover:bg-gray-200 p-2 rounded-full"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.636 5.636a9 9 0 1 0 12.728 0M12 3v9"})])],-1),je=[Ue],Le={class:"my-auto mr-2"},Ne=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z"})],-1),qe={class:"border-b dark:border-zinc-700"},Te=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-5"},[e("path",{"fill-rule":"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v9a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75ZM6.166 5.106a.75.75 0 0 1 0 1.06 8.25 8.25 0 1 0 11.668 0 .75.75 0 1 1 1.06-1.06c3.808 3.807 3.808 9.98 0 13.788-3.807 3.808-9.98 3.808-13.788 0-3.808-3.807-3.808-9.98 0-13.788a.75.75 0 0 1 1.06 0Z","clip-rule":"evenodd"})],-1),Oe=e("span",null,"Disable Interface",-1),We=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-5"},[e("path",{"fill-rule":"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v9a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75ZM6.166 5.106a.75.75 0 0 1 0 1.06 8.25 8.25 0 1 0 11.668 0 .75.75 0 1 1 1.06-1.06c3.808 3.807 3.808 9.98 0 13.788-3.807 3.808-9.98 3.808-13.788 0-3.808-3.807-3.808-9.98 0-13.788a.75.75 0 0 1 1.06 0Z","clip-rule":"evenodd"})],-1),Xe=e("span",null,"Enable Interface",-1),Ke=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-5"},[e("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"})],-1),Ye=e("span",null,"Edit Interface",-1),Ge=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"size-5"},[e("path",{"fill-rule":"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v11.69l3.22-3.22a.75.75 0 1 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 1 1 1.06-1.06l3.22 3.22V3a.75.75 0 0 1 .75-.75Zm-9 13.5a.75.75 0 0 1 .75.75v2.25a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5V16.5a.75.75 0 0 1 1.5 0v2.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V16.5a.75.75 0 0 1 .75-.75Z","clip-rule":"evenodd"})],-1),Je=e("span",null,"Export Interface",-1),Qe={class:"border-t dark:border-zinc-700"},$e=e("svg",{class:"size-5 text-red-500",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8.75 1A2.75 2.75 0 0 0 6 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 1 0 .23 1.482l.149-.022.841 10.518A2.75 2.75 0 0 0 7.596 19h4.807a2.75 2.75 0 0 0 2.742-2.53l.841-10.52.149.023a.75.75 0 0 0 .23-1.482A41.03 41.03 0 0 0 14 4.193V3.75A2.75 2.75 0 0 0 11.25 1h-2.5ZM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4ZM8.58 7.72a.75.75 0 0 0-1.5.06l.3 7.5a.75.75 0 1 0 1.5-.06l-.3-7.5Zm4.34.06a.75.75 0 1 0-1.5-.06l-.3 7.5a.75.75 0 1 0 1.5.06l.3-7.5Z","clip-rule":"evenodd"})],-1),et=e("span",{class:"text-red-500"},"Delete Interface",-1),tt={key:1,class:"p-1 text-sm border-t dark:text-zinc-100 dark:border-zinc-700"},st={key:0},nt={key:1},at={class:"flex bg-gray-50 p-1 text-sm text-gray-500 space-x-1 border-t rounded-b dark:bg-zinc-800 dark:text-white dark:border-zinc-700"},it={key:0,class:"text-sm text-green-500"},rt={key:1,class:"text-sm text-red-500"},ot={key:2},lt={key:3};function ct(s,a,t,m,d,n){var c,f,M,A,Z,S,B,D,F;const l=x("IconButton"),h=x("DropDownMenuItem"),I=x("DropDownMenu");return r(),o("div",T,[((c=t.iface._stats)==null?void 0:c.ifac_signature)!=null?(r(),o("div",O,[e("div",W,[X,e("span",K,[e("span",Y,i(t.iface._stats.ifac_size*8)+"-bit IFAC",1),p(),((f=t.iface._stats)==null?void 0:f.ifac_netname)!=null?(r(),o("span",G,[p("• Network Name: "),e("span",J,i(t.iface._stats.ifac_netname),1)])):_("",!0),p(" • Signature "),e("span",{onClick:a[0]||(a[0]=b=>n.onIFACSignatureClick(t.iface._stats.ifac_signature)),class:"cursor-pointer"},"<"+i(t.iface._stats.ifac_signature.slice(0,6))+"..."+i(t.iface._stats.ifac_signature.slice(-6))+">",1)])])])):_("",!0),e("div",Q,[e("div",$,[t.iface.type==="AutoInterface"?(r(),o("svg",ee,se)):t.iface.type==="RNodeInterface"?(r(),o("svg",ne,ie)):t.iface.type==="TCPClientInterface"||t.iface.type==="TCPServerInterface"||t.iface.type==="UDPInterface"?(r(),o("svg",re,le)):t.iface.type==="SerialInterface"?(r(),o("svg",ce,fe)):t.iface.type==="RNodeMultiInterface"?(r(),o("svg",ue,_e)):t.iface.type==="I2PInterface"?(r(),o("svg",me,we)):t.iface.type==="KISSInterface"||t.iface.type==="AX25KISSInterface"?(r(),o("svg",ge,be)):t.iface.type==="PipeInterface"?(r(),o("svg",ye,Ie)):(r(),o("svg",pe,ze))]),e("div",null,[e("div",Me,i(t.iface._name),1),e("div",Ae,[t.iface.type==="AutoInterface"?(r(),o("div",Ze,i(t.iface.type)+" • Ethernet and WiFi ",1)):t.iface.type==="TCPClientInterface"?(r(),o("div",Se,i(t.iface.type)+" • "+i(t.iface.target_host)+":"+i(t.iface.target_port),1)):t.iface.type==="TCPServerInterface"?(r(),o("div",Be,i(t.iface.type)+" • "+i(t.iface.listen_ip)+":"+i(t.iface.listen_port),1)):(r(),o("div",De,i(t.iface.type),1))])]),e("div",Fe,[n.isInterfaceEnabled(t.iface)?(r(),o("span",He,"Enabled")):(r(),o("span",Ve,"Disabled"))]),e("div",Ee,[n.isInterfaceEnabled(t.iface)?(r(),o("button",{key:0,onClick:a[1]||(a[1]=(...b)=>n.disableInterface&&n.disableInterface(...b)),type:"button",class:"cursor-pointer"},Re)):(r(),o("button",{key:1,onClick:a[2]||(a[2]=(...b)=>n.enableInterface&&n.enableInterface(...b)),type:"button",class:"cursor-pointer"},je))]),e("div",Le,[w(I,null,{button:v(()=>[w(l,null,{default:v(()=>[Ne]),_:1})]),items:v(()=>[e("div",qe,[n.isInterfaceEnabled(t.iface)?(r(),k(h,{key:0,onClick:n.disableInterface},{default:v(()=>[Te,Oe]),_:1},8,["onClick"])):(r(),k(h,{key:1,onClick:n.enableInterface},{default:v(()=>[We,Xe]),_:1},8,["onClick"]))]),w(h,{onClick:n.editInterface},{default:v(()=>[Ke,Ye]),_:1},8,["onClick"]),w(h,{onClick:n.exportInterface},{default:v(()=>[Ge,Je]),_:1},8,["onClick"]),e("div",Qe,[w(h,{onClick:n.deleteInterface},{default:v(()=>[$e,et]),_:1},8,["onClick"])])]),_:1})])]),["UDPInterface","RNodeInterface"].includes(t.iface.type)?(r(),o("div",tt,[t.iface.type==="UDPInterface"?(r(),o("div",st,[e("div",null,"Listen: "+i(t.iface.listen_ip)+":"+i(t.iface.listen_port),1),e("div",null,"Forward: "+i(t.iface.forward_ip)+":"+i(t.iface.forward_port),1)])):t.iface.type==="RNodeInterface"?(r(),o("div",nt,[e("div",null,"Port: "+i(t.iface.port),1),e("div",null,"Frequency: "+i(n.formatFrequency(t.iface.frequency)),1),e("div",null,"Bandwidth: "+i(n.formatFrequency(t.iface.bandwidth)),1),e("div",null,"Spreading Factor: "+i(t.iface.spreadingfactor),1),e("div",null,"Coding Rate: "+i(t.iface.codingrate),1),e("div",null,"Transmit Power: "+i(t.iface.txpower)+"dBm",1)])):_("",!0)])):_("",!0),e("div",at,[((M=t.iface._stats)==null?void 0:M.status)===!0?(r(),o("div",it,"Connected")):(r(),o("div",rt,"Disconnected")),e("div",null,"• Bitrate: "+i(n.formatBitsPerSecond(((A=t.iface._stats)==null?void 0:A.bitrate)??0)),1),e("div",null,"• TX: "+i(n.formatBytes(((Z=t.iface._stats)==null?void 0:Z.txb)??0)),1),e("div",null,"• RX: "+i(n.formatBytes(((S=t.iface._stats)==null?void 0:S.rxb)??0)),1),t.iface.type==="RNodeInterface"?(r(),o("div",ot,"• Noise Floor: "+i((B=t.iface._stats)==null?void 0:B.noise_floor)+" dBm ",1)):_("",!0),((D=t.iface._stats)==null?void 0:D.clients)!=null?(r(),o("div",lt,"• Clients: "+i((F=t.iface._stats)==null?void 0:F.clients),1)):_("",!0)])])}const dt=z(q,[["render",ct]]),ft={name:"ImportInterfacesModal",emits:["dismissed"],data(){return{isShowing:!1,selectedFile:null,importableInterfaces:[],selectedInterfaces:[]}},methods:{show(){this.isShowing=!0,this.selectedFile=null,this.importableInterfaces=[],this.selectedInterfaces=[]},dismiss(){this.isShowing=!1,this.$emit("dismissed")},clearSelectedFile(){this.selectedFile=null,this.$refs["import-interfaces-file-input"].value=null},async onFileSelected(s){const a=s.target.files[0];if(a){this.selectedFile=a,this.importableInterfaces=[],this.selectedInterfaces=[];try{const t=await window.axios.post("/api/v1/reticulum/interfaces/import-preview",{config:await a.text()});if(!t.data.interfaces||t.data.interfaces.length===0){this.clearSelectedFile(),u.alert("No interfaces were found in the selected configuration file");return}this.importableInterfaces=t.data.interfaces,this.selectAllInterfaces()}catch(t){this.clearSelectedFile(),u.alert("Failed to parse configuration file"),console.error(t)}}},isInterfaceSelected(s){return this.selectedInterfaces.includes(s)},selectInterface(s){this.isInterfaceSelected(s)||this.selectedInterfaces.push(s)},deselectInterface(s){this.selectedInterfaces=this.selectedInterfaces.filter(a=>a!==s)},toggleSelectedInterface(s){this.isInterfaceSelected(s)?this.deselectInterface(s):this.selectInterface(s)},selectAllInterfaces(){this.selectedInterfaces=this.importableInterfaces.map(s=>s.name)},deselectAllInterfaces(){this.selectedInterfaces=[]},async importSelectedInterfaces(){var s,a;if(!this.selectedFile){u.alert("Please select a configuration file");return}if(this.selectedInterfaces.length===0){u.alert("Please select at least one interface to import");return}try{await window.axios.post("/api/v1/reticulum/interfaces/import",{config:await this.selectedFile.text(),selected_interface_names:this.selectedInterfaces}),this.dismiss(),u.alert("Interfaces imported successfully. MeshChat must be restarted for these changes to take effect.")}catch(t){const m=((a=(s=t.response)==null?void 0:s.data)==null?void 0:a.message)||"Failed to import interfaces";u.alert(m),console.error(t)}},formatFrequency(s){return g.formatFrequency(s)}}},ut={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity flex items-center justify-center"},ht={class:"flex w-full h-full p-4 overflow-y-auto"},_t={class:"my-auto mx-auto w-full bg-white dark:bg-zinc-900 rounded-lg shadow-xl max-w-2xl"},mt=e("div",{class:"p-4 border-b dark:border-zinc-700"},[e("h3",{class:"text-lg font-semibold dark:text-white"},"Import Interfaces")],-1),vt={class:"divide-y dark:divide-zinc-700"},wt={class:"p-2"},gt={key:0,class:"mt-2 text-sm text-gray-700 dark:text-zinc-200"},xt=e("ul",{class:"list-disc list-inside"},[e("li",null,"You can import interfaces from a ~/.reticulum/config file."),e("li",null,"You can import interfaces from an exported interfaces file.")],-1),bt=[xt],yt={key:0,class:"divide-y dark:divide-zinc-700"},kt={class:"flex p-2"},It=e("div",{class:"my-auto mr-auto text-sm font-medium text-gray-700 dark:text-zinc-200"},"Select Interfaces to Import",-1),pt={class:"my-auto space-x-2"},Ct={class:"bg-gray-200 p-2 space-y-2 max-h-80 overflow-y-auto dark:bg-zinc-800"},zt=["onClick"],Mt={class:"mr-auto text-sm"},At={class:"font-semibold text-gray-700 dark:text-zinc-100"},Zt={class:"text-sm text-gray-500 dark:text-zinc-100"},St={key:0},Bt=e("div",null,"Ethernet and WiFi",-1),Dt={key:1},Ft={key:2},Ht={key:3},Vt={key:4},Et={key:5},Pt=["value"],Rt={class:"p-4 border-t dark:border-zinc-700 flex justify-end space-x-2"};function Ut(s,a,t,m,d,n){return d.isShowing?(r(),o("div",ut,[e("div",ht,[V((r(),o("div",_t,[mt,e("div",vt,[e("div",wt,[e("div",null,[e("input",{ref:"import-interfaces-file-input",type:"file",onChange:a[0]||(a[0]=(...l)=>n.onFileSelected&&n.onFileSelected(...l)),accept:"*",class:"w-full text-sm text-gray-500 dark:text-zinc-400"},null,544)]),d.selectedFile?_("",!0):(r(),o("div",gt,bt))]),d.importableInterfaces.length>0?(r(),o("div",yt,[e("div",kt,[It,e("div",pt,[e("button",{onClick:a[1]||(a[1]=(...l)=>n.selectAllInterfaces&&n.selectAllInterfaces(...l)),class:"text-sm text-blue-500 hover:underline"},"Select All"),e("button",{onClick:a[2]||(a[2]=(...l)=>n.deselectAllInterfaces&&n.deselectAllInterfaces(...l)),class:"text-sm text-blue-500 hover:underline"},"Deselect All")])]),e("div",Ct,[(r(!0),o(y,null,C(d.importableInterfaces,l=>(r(),o("div",{onClick:h=>n.toggleSelectedInterface(l.name),key:l.name,class:"bg-white cursor-pointer flex items-center p-2 border rounded shadow dark:bg-zinc-900 dark:border-zinc-700"},[e("div",Mt,[e("div",At,i(l.name),1),e("div",Zt,[l.type==="AutoInterface"?(r(),o("div",St,[e("div",null,i(l.type),1),Bt])):l.type==="TCPClientInterface"?(r(),o("div",Dt,[e("div",null,i(l.type),1),e("div",null,i(l.target_host)+":"+i(l.target_port),1)])):l.type==="TCPServerInterface"?(r(),o("div",Ft,[e("div",null,i(l.type),1),e("div",null,i(l.listen_ip)+":"+i(l.listen_port),1)])):l.type==="UDPInterface"?(r(),o("div",Ht,[e("div",null,i(l.type),1),e("div",null,"Listen: "+i(l.listen_ip)+":"+i(l.listen_port),1),e("div",null,"Forward: "+i(l.forward_ip)+":"+i(l.forward_port),1)])):l.type==="RNodeInterface"?(r(),o("div",Vt,[e("div",null,i(l.type),1),e("div",null,"Port: "+i(l.port),1),e("div",null,"Frequency: "+i(n.formatFrequency(l.frequency)),1),e("div",null,"Bandwidth: "+i(n.formatFrequency(l.bandwidth)),1),e("div",null,"Spreading Factor: "+i(l.spreadingfactor),1),e("div",null,"Coding Rate: "+i(l.codingrate),1),e("div",null,"Transmit Power: "+i(l.txpower)+"dBm",1)])):(r(),o("div",Et,i(l.type),1))])]),V(e("input",{onClick:a[3]||(a[3]=L(()=>{},["stop"])),type:"checkbox","onUpdate:modelValue":a[4]||(a[4]=h=>d.selectedInterfaces=h),value:l.name,class:"mx-2 h-4 w-4 text-blue-600 rounded border-gray-300 dark:border-zinc-600"},null,8,Pt),[[N,d.selectedInterfaces]])],8,zt))),128))])])):_("",!0)]),e("div",Rt,[e("button",{onClick:a[5]||(a[5]=(...l)=>n.dismiss&&n.dismiss(...l)),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 dark:bg-zinc-800 dark:text-zinc-200 dark:border-zinc-600 dark:hover:bg-zinc-700"}," Cancel "),e("button",{onClick:a[6]||(a[6]=(...l)=>n.importSelectedInterfaces&&n.importSelectedInterfaces(...l)),class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-600"}," Import Selected ")])])),[[j,n.dismiss]])])])):_("",!0)}const jt=z(ft,[["render",Ut]]);class E{static downloadFile(a,t){const m=URL.createObjectURL(t),d=document.createElement("a");d.href=m,d.download=a,d.style.display="none",document.body.append(d),d.click(),d.remove(),setTimeout(()=>URL.revokeObjectURL(m),1e4)}}const Lt={name:"InterfacesPage",components:{ImportInterfacesModal:jt,Interface:dt},data(){return{interfaces:{},interfaceStats:{},reloadInterval:null}},beforeUnmount(){clearInterval(this.reloadInterval)},mounted(){this.loadInterfaces(),this.updateInterfaceStats(),this.reloadInterval=setInterval(()=>{this.updateInterfaceStats()},1e3)},methods:{relaunch(){H.relaunch()},isInterfaceEnabled:function(s){return g.isInterfaceEnabled(s)},async loadInterfaces(){try{const s=await window.axios.get("/api/v1/reticulum/interfaces");this.interfaces=s.data.interfaces}catch{}},async updateInterfaceStats(){var s;try{const t=((s=(await window.axios.get("/api/v1/interface-stats")).data.interface_stats)==null?void 0:s.interfaces)??[];for(const m of t)this.interfaceStats[m.short_name]=m}catch{}},async enableInterface(s){try{await window.axios.post("/api/v1/reticulum/interfaces/enable",{name:s})}catch(a){u.alert("failed to enable interface"),console.log(a)}await this.loadInterfaces()},async disableInterface(s){try{await window.axios.post("/api/v1/reticulum/interfaces/disable",{name:s})}catch(a){u.alert("failed to disable interface"),console.log(a)}await this.loadInterfaces()},async editInterface(s){this.$router.push({name:"interfaces.edit",query:{interface_name:s}})},async deleteInterface(s){if(confirm("Are you sure you want to delete this interface? This can not be undone!")){try{await window.axios.post("/api/v1/reticulum/interfaces/delete",{name:s})}catch(a){u.alert("failed to delete interface"),console.log(a)}await this.loadInterfaces()}},async exportInterfaces(){try{const s=await window.axios.post("/api/v1/reticulum/interfaces/export");E.downloadFile("meshchat_interfaces.txt",new Blob([s.data]))}catch(s){u.alert("Failed to export interfaces"),console.error(s)}},async exportInterface(s){try{const a=await window.axios.post("/api/v1/reticulum/interfaces/export",{selected_interface_names:[s]});E.downloadFile(`${s}.txt`,new Blob([a.data]))}catch(a){u.alert("Failed to export interface"),console.error(a)}},showImportInterfacesModal(){this.$refs["import-interfaces-modal"].show()},onImportInterfacesModalDismissed(){this.loadInterfaces()}},computed:{isElectron(){return H.isElectron()},interfacesWithStats(){const s=[];for(const[a,t]of Object.entries(this.interfaces))t._name=a,t._stats=this.interfaceStats[a],s.push(t);return s},enabledInterfaces(){return this.interfacesWithStats.filter(s=>this.isInterfaceEnabled(s))},disabledInterfaces(){return this.interfacesWithStats.filter(s=>!this.isInterfaceEnabled(s))}}},Nt={class:"flex flex-col flex-1 overflow-hidden min-w-full sm:min-w-[500px] dark:bg-zinc-950"},qt={class:"overflow-y-auto p-2 space-y-2"},Tt={class:"flex bg-orange-500 p-2 text-sm font-semibold leading-6 text-white rounded shadow"},Ot=e("div",{class:"my-auto"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})])],-1),Wt=e("div",{class:"ml-2 my-auto"},"Reticulum MeshChat must be restarted for any interface changes to take effect.",-1),Xt=e("span",null,"Restart Now",-1),Kt=[Xt],Yt={class:"flex space-x-1"},Gt=e("button",{type:"button",class:"my-auto inline-flex items-center gap-x-1 rounded-md bg-gray-500 dark:bg-zinc-700 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-gray-400 dark:hover:bg-zinc-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-500 dark:focus-visible:outline-zinc-700"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})]),e("span",null,"Add Interface")],-1),Jt={class:"my-auto"},Qt=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})],-1),$t=e("span",null,"Import",-1),e0=[Qt,$t],t0={class:"my-auto"},s0=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})],-1),n0=e("span",null,"Export",-1),a0=[s0,n0],i0={key:0,class:"font-semibold dark:text-zinc-200"};function r0(s,a,t,m,d,n){const l=x("RouterLink"),h=x("Interface"),I=x("ImportInterfacesModal");return r(),o(y,null,[e("div",Nt,[e("div",qt,[e("div",Tt,[Ot,Wt,n.isElectron?(r(),o("button",{key:0,onClick:a[0]||(a[0]=(...c)=>n.relaunch&&n.relaunch(...c)),type:"button",class:"ml-auto my-auto inline-flex items-center gap-x-1 rounded-md bg-white dark:bg-zinc-800 px-2 py-1 text-sm font-semibold text-black dark:text-zinc-200 shadow-sm hover:bg-gray-50 dark:hover:bg-zinc-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white dark:focus-visible:outline-zinc-700"},Kt)):_("",!0)]),e("div",Yt,[w(l,{to:{name:"interfaces.add"}},{default:v(()=>[Gt]),_:1}),e("div",Jt,[e("button",{onClick:a[1]||(a[1]=(...c)=>n.showImportInterfacesModal&&n.showImportInterfacesModal(...c)),type:"button",class:"inline-flex items-center gap-x-1 rounded-md bg-gray-500 dark:bg-zinc-700 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-gray-400 dark:hover:bg-zinc-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-500 dark:focus-visible:outline-zinc-700"},e0)]),e("div",t0,[e("button",{onClick:a[2]||(a[2]=(...c)=>n.exportInterfaces&&n.exportInterfaces(...c)),type:"button",class:"inline-flex items-center gap-x-1 rounded-md bg-gray-500 dark:bg-zinc-700 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-gray-400 dark:hover:bg-zinc-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-500 dark:focus-visible:outline-zinc-700"},a0)])]),(r(!0),o(y,null,C(n.enabledInterfaces,c=>(r(),k(h,{iface:c,onEnable:f=>n.enableInterface(c._name),onDisable:f=>n.disableInterface(c._name),onEdit:f=>n.editInterface(c._name),onExport:f=>n.exportInterface(c._name),onDelete:f=>n.deleteInterface(c._name)},null,8,["iface","onEnable","onDisable","onEdit","onExport","onDelete"]))),256)),n.disabledInterfaces.length>0?(r(),o("div",i0,"Disabled Interfaces")):_("",!0),(r(!0),o(y,null,C(n.disabledInterfaces,c=>(r(),k(h,{iface:c,onEnable:f=>n.enableInterface(c._name),onDisable:f=>n.disableInterface(c._name),onEdit:f=>n.editInterface(c._name),onExport:f=>n.exportInterface(c._name),onDelete:f=>n.deleteInterface(c._name)},null,8,["iface","onEnable","onDisable","onEdit","onExport","onDelete"]))),256))])]),w(I,{ref:"import-interfaces-modal",onDismissed:n.onImportInterfacesModalDismissed},null,8,["onDismissed"])],64)}const u0=z(Lt,[["render",r0]]);export{u0 as default};
