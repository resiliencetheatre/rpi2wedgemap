import{D as p,U as y}from"./app-DgFzPxLe.js";import{_ as I,o,q as s,k as t,B as l,y as c,z as d,m as x,C as b,H as w,S as m,A as f,D as k,E as h}from"./_plugin-vue_export-helper-oA2e8qpL.js";const _={name:"AddInterfacePage",data(){return{isEditingInterface:!1,config:null,comports:[],newInterfaceName:null,newInterfaceType:null,newInterfaceTargetHost:null,newInterfaceTargetPort:null,newInterfaceListenIp:null,newInterfaceListenPort:null,newInterfaceForwardIp:null,newInterfaceForwardPort:null,newInterfacePort:null,newInterfaceFrequency:null,newInterfaceBandwidth:null,newInterfaceTxpower:null,newInterfaceSpreadingFactor:null,newInterfaceCodingRate:null,RNodeInterfaceDefaults:{bandwidths:[7800,10400,15600,20800,31250,41700,62500,125e3,25e4,5e5,1625e3],codingrates:[5,6,7,8],spreadingfactors:[5,6,7,8,9,10,11,12]}}},mounted(){this.getConfig(),this.loadComports();const a=this.$route.query.interface_name;a!=null&&(this.isEditingInterface=!0,this.loadInterfaceToEdit(a))},methods:{async getConfig(){try{const a=await window.axios.get("/api/v1/config");this.config=a.data.config}catch(a){console.log(a)}},async updateConfig(a){try{const n=await window.axios.patch("/api/v1/config",a);this.config=n.data.config}catch(n){alert("Failed to save config!"),console.log(n)}},async loadComports(){try{const a=await window.axios.get("/api/v1/comports");this.comports=a.data.comports}catch{}},async loadInterfaceToEdit(a){try{const i=(await window.axios.get("/api/v1/reticulum/interfaces")).data.interfaces[a];if(!i){p.alert("The selected interface for editing could not be found."),this.$router.push({name:"interfaces"});return}this.newInterfaceName=a,this.newInterfaceType=i.type,this.newInterfaceTargetHost=i.target_host,this.newInterfaceTargetPort=i.target_port,this.newInterfaceListenIp=i.listen_ip,this.newInterfaceListenPort=i.listen_port,this.newInterfaceForwardIp=i.forward_ip,this.newInterfaceForwardPort=i.forward_port,this.newInterfacePort=i.port,this.newInterfaceFrequency=i.frequency,this.newInterfaceBandwidth=i.bandwidth,this.newInterfaceTxpower=i.txpower,this.newInterfaceSpreadingFactor=i.spreadingfactor,this.newInterfaceCodingRate=i.codingrate}catch{}},async addInterface(){var a,n;try{const u=await window.axios.post("/api/v1/reticulum/interfaces/add",{allow_overwriting_interface:this.isEditingInterface,name:this.newInterfaceName,type:this.newInterfaceType,target_host:this.newInterfaceTargetHost,target_port:this.newInterfaceTargetPort,listen_ip:this.newInterfaceListenIp,listen_port:this.newInterfaceListenPort,forward_ip:this.newInterfaceForwardIp,forward_port:this.newInterfaceForwardPort,port:this.newInterfacePort,frequency:this.newInterfaceFrequency,bandwidth:this.newInterfaceBandwidth,txpower:this.newInterfaceTxpower,spreadingfactor:this.newInterfaceSpreadingFactor,codingrate:this.newInterfaceCodingRate});u.data.message&&p.alert(u.data.message),this.$router.push({name:"interfaces"})}catch(u){const i=((n=(a=u.response)==null?void 0:a.data)==null?void 0:n.message)??"failed to add interface";p.alert(i),console.log(u)}},formatFrequency(a){return y.formatFrequency(a)}}},v={class:"flex flex-col flex-1 overflow-hidden min-w-full sm:min-w-[500px] dark:bg-zinc-950"},T={class:"overflow-y-auto p-2 space-y-2"},z={key:0,class:"bg-white rounded shadow divide-y divide-gray-200 dark:bg-zinc-900"},P={class:"flex p-2"},C=t("div",{class:"my-auto mr-auto"},[t("div",{class:"font-bold dark:text-white"},"Community Interfaces"),t("div",{class:"text-sm dark:text-gray-100"},"These TCP interfaces serve as a quick way to test Reticulum. We suggest running your own as these may not always be available.")],-1),N={class:"my-auto ml-2"},F=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-5 h-5"},[t("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})],-1),U=[F],R={class:"divide-y divide-gray-200 dark:text-white"},S={class:"flex px-2 py-1"},V=t("div",{class:"my-auto mr-auto"},[t("div",null,"RNS Testnet Amsterdam"),t("div",{class:"text-xs"},"amsterdam.connect.reticulum.network:4965")],-1),L={class:"ml-2 my-auto"},q=t("span",null,"Use Interface",-1),B=[q],D={class:"flex px-2 py-1"},E=t("div",{class:"my-auto mr-auto"},[t("div",null,"RNS Testnet BetweenTheBorders"),t("div",{class:"text-xs"},"reticulum.betweentheborders.com:4242")],-1),H={class:"ml-2 my-auto"},A=t("span",null,"Use Interface",-1),M=[A],K={class:"bg-white rounded shadow divide-y divide-gray-200 dark:bg-zinc-950"},W={class:"p-2 font-bold dark:text-white"},Z={key:0},j={key:1},G={class:"p-2 space-y-3"},J=t("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-zinc-100"},"Name",-1),O=["disabled"],Q=t("div",{class:"text-xs text-gray-600"},"Interface names must be unique.",-1),X={class:"mb-2"},Y=t("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-zinc-100"},"Type",-1),$=h('<option disabled selected>--</option><option value="AutoInterface">AutoInterface</option><option value="RNodeInterface">RNodeInterface</option><option value="TCPClientInterface">TCPClientInterface</option><option value="TCPServerInterface">TCPServerInterface</option><option value="UDPInterface">UDPInterface</option>',6),ee=[$],te=t("div",{class:"text-xs text-gray-600"},[k(" Need help? "),t("a",{class:"text-blue-500 underline",href:"https://reticulum.network/manual/interfaces.html",target:"_blank"},"Reticulum Docs: Configuring Interfaces")],-1),re={key:0,class:"mb-2"},ne=t("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-zinc-100"},"Target Host",-1),oe={key:1,class:"mb-2"},se=t("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-zinc-100"},"Target Port",-1),ae={key:2,class:"mb-2"},ie=t("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-zinc-100"},"Listen IP",-1),ce={key:3,class:"mb-2"},le=t("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-zinc-100"},"Listen Port",-1),de={key:4,class:"mb-2"},ue=t("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-zinc-100"},"Forward IP",-1),fe={key:5,class:"mb-2"},be=t("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-zinc-100"},"Forward Port",-1),ge={key:6,class:"mb-2"},we=t("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-zinc-100"},"Port",-1),me=["value"],pe={key:7,class:"mb-2"},ye=t("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-zinc-100"},"Frequency (Hz)",-1),Ie={class:"text-xs text-gray-600"},xe={key:8,class:"mb-2"},ke=t("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-zinc-100"},"Bandwidth",-1),he=["value"],_e={key:9,class:"mb-2"},ve=t("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-zinc-100"},"Transmit Power (dBm)",-1),Te={key:10,class:"mb-2"},ze=t("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-zinc-100"},"Spreading Factor",-1),Pe=["value"],Ce={key:11,class:"mb-2"},Ne=t("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-zinc-100"},"Coding Rate",-1),Fe=["value"],Ue={key:0},Re={key:1};function Se(a,n,u,i,e,g){return o(),s("div",v,[t("div",T,[!e.isEditingInterface&&e.config!=null&&e.config.show_suggested_community_interfaces?(o(),s("div",z,[t("div",P,[C,t("div",N,[t("button",{onClick:n[0]||(n[0]=r=>g.updateConfig({show_suggested_community_interfaces:!1})),type:"button",class:"text-gray-700 bg-gray-100 hover:bg-gray-200 p-2 rounded-full dark:bg-zinc-600 dark:text-white dark:hover:bg-zinc-700 dark:focus-visible:outline-zinc-500"},U)])]),t("div",R,[t("div",S,[V,t("div",L,[t("button",{onClick:n[1]||(n[1]=r=>{e.newInterfaceName="RNS Testnet Amsterdam",e.newInterfaceType="TCPClientInterface",e.newInterfaceTargetHost="amsterdam.connect.reticulum.network",e.newInterfaceTargetPort="4965"}),type:"button",class:"inline-flex items-center gap-x-1 rounded-md bg-gray-500 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-gray-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-500"},B)])]),t("div",D,[E,t("div",H,[t("button",{onClick:n[2]||(n[2]=r=>{e.newInterfaceName="RNS Testnet BetweenTheBorders",e.newInterfaceType="TCPClientInterface",e.newInterfaceTargetHost="reticulum.betweentheborders.com",e.newInterfaceTargetPort="4242"}),type:"button",class:"inline-flex items-center gap-x-1 rounded-md bg-gray-500 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-gray-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-500"},M)])])])])):l("",!0),t("div",K,[t("div",W,[e.isEditingInterface?(o(),s("span",Z,"Edit Interface")):(o(),s("span",j,"Add Interface"))]),t("div",G,[t("div",null,[J,c(t("input",{type:"text",disabled:e.isEditingInterface,placeholder:"New Interface Name","onUpdate:modelValue":n[3]||(n[3]=r=>e.newInterfaceName=r),class:x(["border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-zinc-900 dark:border-zinc-600 dark:text-white",[e.isEditingInterface?"cursor-not-allowed bg-gray-200":"bg-gray-50"]])},null,10,O),[[d,e.newInterfaceName]]),Q]),t("div",X,[Y,c(t("select",{"onUpdate:modelValue":n[4]||(n[4]=r=>e.newInterfaceType=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-zinc-900 dark:border-zinc-600 dark:text-white"},ee,512),[[b,e.newInterfaceType]]),te]),e.newInterfaceType==="TCPClientInterface"?(o(),s("div",re,[ne,c(t("input",{type:"text",placeholder:"example.com","onUpdate:modelValue":n[5]||(n[5]=r=>e.newInterfaceTargetHost=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-zinc-900 dark:border-zinc-600 dark:text-white dark:focus:ring-blue-600 dark:focus:border-blue-600"},null,512),[[d,e.newInterfaceTargetHost]])])):l("",!0),e.newInterfaceType==="TCPClientInterface"?(o(),s("div",oe,[se,c(t("input",{type:"text",placeholder:"1234","onUpdate:modelValue":n[6]||(n[6]=r=>e.newInterfaceTargetPort=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-zinc-900 dark:border-zinc-600 dark:text-white dark:focus:ring-blue-600 dark:focus:border-blue-600"},null,512),[[d,e.newInterfaceTargetPort]])])):l("",!0),e.newInterfaceType==="TCPServerInterface"||e.newInterfaceType==="UDPInterface"?(o(),s("div",ae,[ie,c(t("input",{type:"text",placeholder:"0.0.0.0","onUpdate:modelValue":n[7]||(n[7]=r=>e.newInterfaceListenIp=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-zinc-900 dark:border-zinc-600 dark:text-white dark:focus:ring-blue-600 dark:focus:border-blue-600"},null,512),[[d,e.newInterfaceListenIp]])])):l("",!0),e.newInterfaceType==="TCPServerInterface"||e.newInterfaceType==="UDPInterface"?(o(),s("div",ce,[le,c(t("input",{type:"text",placeholder:"1234","onUpdate:modelValue":n[8]||(n[8]=r=>e.newInterfaceListenPort=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-zinc-900 dark:border-zinc-600 dark:text-white dark:focus:ring-blue-600 dark:focus:border-blue-600"},null,512),[[d,e.newInterfaceListenPort]])])):l("",!0),e.newInterfaceType==="UDPInterface"?(o(),s("div",de,[ue,c(t("input",{type:"text",placeholder:"255.255.255.255","onUpdate:modelValue":n[9]||(n[9]=r=>e.newInterfaceForwardIp=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-zinc-900 dark:border-zinc-600 dark:text-white dark:focus:ring-blue-600 dark:focus:border-blue-600"},null,512),[[d,e.newInterfaceForwardIp]])])):l("",!0),e.newInterfaceType==="UDPInterface"?(o(),s("div",fe,[be,c(t("input",{type:"text",placeholder:"1234","onUpdate:modelValue":n[10]||(n[10]=r=>e.newInterfaceForwardPort=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-zinc-900 dark:border-zinc-600 dark:text-white dark:focus:ring-blue-600 dark:focus:border-blue-600"},null,512),[[d,e.newInterfaceForwardPort]])])):l("",!0),e.newInterfaceType==="RNodeInterface"?(o(),s("div",ge,[we,c(t("select",{"onUpdate:modelValue":n[11]||(n[11]=r=>e.newInterfacePort=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-zinc-900 dark:border-zinc-600 dark:text-white dark:focus:ring-blue-600 dark:focus:border-blue-600"},[(o(!0),s(w,null,m(e.comports,r=>(o(),s("option",{value:r.device},f(r.device)+" (Product: "+f(r.product??"?")+", Serial: "+f(r.serial??"?")+")",9,me))),256))],512),[[b,e.newInterfacePort]])])):l("",!0),e.newInterfaceType==="RNodeInterface"?(o(),s("div",pe,[ye,c(t("input",{type:"number","onUpdate:modelValue":n[12]||(n[12]=r=>e.newInterfaceFrequency=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-zinc-900 dark:border-zinc-600 dark:text-white dark:focus:ring-blue-600 dark:focus:border-blue-600"},null,512),[[d,e.newInterfaceFrequency]]),t("div",Ie,f(g.formatFrequency(e.newInterfaceFrequency)),1)])):l("",!0),e.newInterfaceType==="RNodeInterface"?(o(),s("div",xe,[ke,c(t("select",{"onUpdate:modelValue":n[13]||(n[13]=r=>e.newInterfaceBandwidth=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-zinc-900 dark:border-zinc-600 dark:text-white dark:focus:ring-blue-600 dark:focus:border-blue-600"},[(o(!0),s(w,null,m(e.RNodeInterfaceDefaults.bandwidths,r=>(o(),s("option",{value:r},f(r/1e3)+" KHz",9,he))),256))],512),[[b,e.newInterfaceBandwidth]])])):l("",!0),e.newInterfaceType==="RNodeInterface"?(o(),s("div",_e,[ve,c(t("input",{"onUpdate:modelValue":n[14]||(n[14]=r=>e.newInterfaceTxpower=r),type:"number",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-zinc-900 dark:border-zinc-600 dark:text-white"},null,512),[[d,e.newInterfaceTxpower]])])):l("",!0),e.newInterfaceType==="RNodeInterface"?(o(),s("div",Te,[ze,c(t("select",{"onUpdate:modelValue":n[15]||(n[15]=r=>e.newInterfaceSpreadingFactor=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-zinc-900 dark:border-zinc-600 dark:text-white dark:focus:ring-blue-600 dark:focus:border-blue-600"},[(o(!0),s(w,null,m(e.RNodeInterfaceDefaults.spreadingfactors,r=>(o(),s("option",{value:r},f(r),9,Pe))),256))],512),[[b,e.newInterfaceSpreadingFactor]])])):l("",!0),e.newInterfaceType==="RNodeInterface"?(o(),s("div",Ce,[Ne,c(t("select",{"onUpdate:modelValue":n[16]||(n[16]=r=>e.newInterfaceCodingRate=r),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-zinc-900 dark:border-zinc-600 dark:text-white dark:focus:ring-blue-600 dark:focus:border-blue-600"},[(o(!0),s(w,null,m(e.RNodeInterfaceDefaults.codingrates,r=>(o(),s("option",{value:r},f(r),9,Fe))),256))],512),[[b,e.newInterfaceCodingRate]])])):l("",!0),t("button",{onClick:n[17]||(n[17]=(...r)=>g.addInterface&&g.addInterface(...r)),type:"button",class:"bg-green-500 hover:bg-green-400 focus-visible:outline-green-500 my-auto inline-flex items-center gap-x-1 rounded-md p-2 text-sm font-semibold text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 dark:bg-zinc-900 dark:border-zinc-600 dark:text-white dark:focus:ring-blue-600 dark:focus:border-blue-600"},[e.isEditingInterface?(o(),s("span",Ue,"Save Interface")):(o(),s("span",Re,"Add Interface"))])])])])])}const qe=I(_,[["render",Se]]);export{qe as default};
