import{_ as y,D as w,U as I,o,c as s,a as t,b as c,h as i,v as d,n as h,i as g,F as m,f as p,t as f,d as x,j as _}from"./app-CqTJZnNE.js";const v={name:"AddInterfacePage",data(){return{isEditingInterface:!1,config:null,comports:[],newInterfaceName:null,newInterfaceType:null,newInterfaceTargetHost:null,newInterfaceTargetPort:null,newInterfaceListenIp:null,newInterfaceListenPort:null,newInterfaceForwardIp:null,newInterfaceForwardPort:null,newInterfacePort:null,newInterfaceFrequency:null,newInterfaceBandwidth:null,newInterfaceTxpower:null,newInterfaceSpreadingFactor:null,newInterfaceCodingRate:null,RNodeInterfaceDefaults:{bandwidths:[7800,10400,15600,20800,31250,41700,62500,125e3,25e4,5e5],codingrates:[5,6,7,8],spreadingfactors:[7,8,9,10,11,12]}}},mounted(){this.getConfig(),this.loadComports();const a=this.$route.query.interface_name;a!=null&&(this.isEditingInterface=!0,this.loadInterfaceToEdit(a))},methods:{async getConfig(){try{const a=await window.axios.get("/api/v1/config");this.config=a.data.config}catch(a){console.log(a)}},async updateConfig(a){try{const r=await window.axios.patch("/api/v1/config",a);this.config=r.data.config}catch(r){alert("Failed to save config!"),console.log(r)}},async loadComports(){try{const a=await window.axios.get("/api/v1/comports");this.comports=a.data.comports}catch{}},async loadInterfaceToEdit(a){try{const l=(await window.axios.get("/api/v1/reticulum/interfaces")).data.interfaces[a];if(!l){w.alert("The selected interface for editing could not be found."),this.$router.push({name:"interfaces"});return}this.newInterfaceName=a,this.newInterfaceType=l.type,this.newInterfaceTargetHost=l.target_host,this.newInterfaceTargetPort=l.target_port,this.newInterfaceListenIp=l.listen_ip,this.newInterfaceListenPort=l.listen_port,this.newInterfaceForwardIp=l.forward_ip,this.newInterfaceForwardPort=l.forward_port,this.newInterfacePort=l.port,this.newInterfaceFrequency=l.frequency,this.newInterfaceBandwidth=l.bandwidth,this.newInterfaceTxpower=l.txpower,this.newInterfaceSpreadingFactor=l.spreadingfactor,this.newInterfaceCodingRate=l.codingrate}catch{}},async addInterface(){var a,r;try{const u=await window.axios.post("/api/v1/reticulum/interfaces/add",{allow_overwriting_interface:this.isEditingInterface,name:this.newInterfaceName,type:this.newInterfaceType,target_host:this.newInterfaceTargetHost,target_port:this.newInterfaceTargetPort,listen_ip:this.newInterfaceListenIp,listen_port:this.newInterfaceListenPort,forward_ip:this.newInterfaceForwardIp,forward_port:this.newInterfaceForwardPort,port:this.newInterfacePort,frequency:this.newInterfaceFrequency,bandwidth:this.newInterfaceBandwidth,txpower:this.newInterfaceTxpower,spreadingfactor:this.newInterfaceSpreadingFactor,codingrate:this.newInterfaceCodingRate});u.data.message&&w.alert(u.data.message),this.$router.push({name:"interfaces"})}catch(u){const l=((r=(a=u.response)==null?void 0:a.data)==null?void 0:r.message)??"failed to add interface";w.alert(l),console.log(u)}},formatFrequency(a){return I.formatFrequency(a)}}},T={class:"flex flex-col flex-1 overflow-hidden min-w-full sm:min-w-[500px]"},k={class:"overflow-y-auto p-2 space-y-2"},P={key:0,class:"bg-white rounded shadow divide-y divide-gray-200"},C={class:"flex p-2"},F=t("div",{class:"my-auto mr-auto"},[t("div",{class:"font-bold"},"Community Interfaces"),t("div",{class:"text-sm"},"These TCP interfaces serve as a quick way to test Reticulum. We suggest running your own as these may not always be available.")],-1),N={class:"my-auto ml-2"},U=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"w-5 h-5"},[t("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})],-1),R=[U],S={class:"divide-y divide-gray-200"},V={class:"flex px-2 py-1"},L=t("div",{class:"my-auto mr-auto"},[t("div",null,"RNS Testnet Amsterdam"),t("div",{class:"text-xs"},"amsterdam.connect.reticulum.network:4965")],-1),q={class:"ml-2 my-auto"},B=t("span",null,"Use Interface",-1),D=[B],E={class:"flex px-2 py-1"},H=t("div",{class:"my-auto mr-auto"},[t("div",null,"RNS Testnet BetweenTheBorders"),t("div",{class:"text-xs"},"betweentheborders.com:4242")],-1),A={class:"ml-2 my-auto"},z=t("span",null,"Use Interface",-1),M=[z],j={class:"bg-white rounded shadow divide-y divide-gray-200"},K={class:"p-2 font-bold"},W={key:0},Z={key:1},G={class:"p-2 space-y-3"},J=t("label",{class:"block mb-2 text-sm font-medium text-gray-900"},"Name",-1),O=["disabled"],Q=t("div",{class:"text-xs text-gray-600"},"Interface names must be unique.",-1),X={class:"mb-2"},Y=t("label",{class:"block mb-2 text-sm font-medium text-gray-900"},"Type",-1),$=_('<option disabled selected>--</option><option value="AutoInterface">AutoInterface</option><option value="RNodeInterface">RNodeInterface</option><option value="TCPClientInterface">TCPClientInterface</option><option value="TCPServerInterface">TCPServerInterface</option><option value="UDPInterface">UDPInterface</option>',6),ee=[$],te=t("div",{class:"text-xs text-gray-600"},[x(" Need help? "),t("a",{class:"text-blue-500 underline",href:"https://reticulum.network/manual/interfaces.html",target:"_blank"},"Reticulum Docs: Configuring Interfaces")],-1),ne={key:0,class:"mb-2"},re=t("label",{class:"block mb-2 text-sm font-medium text-gray-900"},"Target Host",-1),oe={key:1,class:"mb-2"},se=t("label",{class:"block mb-2 text-sm font-medium text-gray-900"},"Target Port",-1),ae={key:2,class:"mb-2"},le=t("label",{class:"block mb-2 text-sm font-medium text-gray-900"},"Listen IP",-1),ie={key:3,class:"mb-2"},ce=t("label",{class:"block mb-2 text-sm font-medium text-gray-900"},"Listen Port",-1),de={key:4,class:"mb-2"},ue=t("label",{class:"block mb-2 text-sm font-medium text-gray-900"},"Forward IP",-1),fe={key:5,class:"mb-2"},ge=t("label",{class:"block mb-2 text-sm font-medium text-gray-900"},"Forward Port",-1),be={key:6,class:"mb-2"},me=t("label",{class:"block mb-2 text-sm font-medium text-gray-900"},"Port",-1),pe=["value"],we={key:7,class:"mb-2"},ye=t("label",{class:"block mb-2 text-sm font-medium text-gray-900"},"Frequency (Hz)",-1),Ie={class:"text-xs text-gray-600"},he={key:8,class:"mb-2"},xe=t("label",{class:"block mb-2 text-sm font-medium text-gray-900"},"Bandwidth",-1),_e=["value"],ve={key:9,class:"mb-2"},Te=t("label",{class:"block mb-2 text-sm font-medium text-gray-900"},"Transmit Power (dBm)",-1),ke={key:10,class:"mb-2"},Pe=t("label",{class:"block mb-2 text-sm font-medium text-gray-900"},"Spreading Factor",-1),Ce=["value"],Fe={key:11,class:"mb-2"},Ne=t("label",{class:"block mb-2 text-sm font-medium text-gray-900"},"Coding Rate",-1),Ue=["value"],Re={key:0},Se={key:1};function Ve(a,r,u,l,e,b){return o(),s("div",T,[t("div",k,[!e.isEditingInterface&&e.config!=null&&e.config.show_suggested_community_interfaces?(o(),s("div",P,[t("div",C,[F,t("div",N,[t("button",{onClick:r[0]||(r[0]=n=>b.updateConfig({show_suggested_community_interfaces:!1})),type:"button",class:"text-gray-700 bg-gray-100 hover:bg-gray-200 p-2 rounded-full"},R)])]),t("div",S,[t("div",V,[L,t("div",q,[t("button",{onClick:r[1]||(r[1]=n=>{e.newInterfaceName="RNS Testnet Amsterdam",e.newInterfaceType="TCPClientInterface",e.newInterfaceTargetHost="amsterdam.connect.reticulum.network",e.newInterfaceTargetPort="4965"}),type:"button",class:"inline-flex items-center gap-x-1 rounded-md bg-gray-500 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-gray-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-500"},D)])]),t("div",E,[H,t("div",A,[t("button",{onClick:r[2]||(r[2]=n=>{e.newInterfaceName="RNS Testnet BetweenTheBorders",e.newInterfaceType="TCPClientInterface",e.newInterfaceTargetHost="betweentheborders.com",e.newInterfaceTargetPort="4242"}),type:"button",class:"inline-flex items-center gap-x-1 rounded-md bg-gray-500 px-2 py-1 text-sm font-semibold text-white shadow-sm hover:bg-gray-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-500"},M)])])])])):c("",!0),t("div",j,[t("div",K,[e.isEditingInterface?(o(),s("span",W,"Edit Interface")):(o(),s("span",Z,"Add Interface"))]),t("div",G,[t("div",null,[J,i(t("input",{type:"text",disabled:e.isEditingInterface,placeholder:"New Interface Name","onUpdate:modelValue":r[3]||(r[3]=n=>e.newInterfaceName=n),class:h(["border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",[e.isEditingInterface?"cursor-not-allowed bg-gray-200":"bg-gray-50"]])},null,10,O),[[d,e.newInterfaceName]]),Q]),t("div",X,[Y,i(t("select",{"onUpdate:modelValue":r[4]||(r[4]=n=>e.newInterfaceType=n),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},ee,512),[[g,e.newInterfaceType]]),te]),e.newInterfaceType==="TCPClientInterface"?(o(),s("div",ne,[re,i(t("input",{type:"text",placeholder:"example.com","onUpdate:modelValue":r[5]||(r[5]=n=>e.newInterfaceTargetHost=n),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},null,512),[[d,e.newInterfaceTargetHost]])])):c("",!0),e.newInterfaceType==="TCPClientInterface"?(o(),s("div",oe,[se,i(t("input",{type:"text",placeholder:"1234","onUpdate:modelValue":r[6]||(r[6]=n=>e.newInterfaceTargetPort=n),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},null,512),[[d,e.newInterfaceTargetPort]])])):c("",!0),e.newInterfaceType==="TCPServerInterface"||e.newInterfaceType==="UDPInterface"?(o(),s("div",ae,[le,i(t("input",{type:"text",placeholder:"0.0.0.0","onUpdate:modelValue":r[7]||(r[7]=n=>e.newInterfaceListenIp=n),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},null,512),[[d,e.newInterfaceListenIp]])])):c("",!0),e.newInterfaceType==="TCPServerInterface"||e.newInterfaceType==="UDPInterface"?(o(),s("div",ie,[ce,i(t("input",{type:"text",placeholder:"1234","onUpdate:modelValue":r[8]||(r[8]=n=>e.newInterfaceListenPort=n),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},null,512),[[d,e.newInterfaceListenPort]])])):c("",!0),e.newInterfaceType==="UDPInterface"?(o(),s("div",de,[ue,i(t("input",{type:"text",placeholder:"255.255.255.255","onUpdate:modelValue":r[9]||(r[9]=n=>e.newInterfaceForwardIp=n),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},null,512),[[d,e.newInterfaceForwardIp]])])):c("",!0),e.newInterfaceType==="UDPInterface"?(o(),s("div",fe,[ge,i(t("input",{type:"text",placeholder:"1234","onUpdate:modelValue":r[10]||(r[10]=n=>e.newInterfaceForwardPort=n),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},null,512),[[d,e.newInterfaceForwardPort]])])):c("",!0),e.newInterfaceType==="RNodeInterface"?(o(),s("div",be,[me,i(t("select",{"onUpdate:modelValue":r[11]||(r[11]=n=>e.newInterfacePort=n),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},[(o(!0),s(m,null,p(e.comports,n=>(o(),s("option",{value:n.device},f(n.device)+" (Product: "+f(n.product??"?")+", Serial: "+f(n.serial??"?")+")",9,pe))),256))],512),[[g,e.newInterfacePort]])])):c("",!0),e.newInterfaceType==="RNodeInterface"?(o(),s("div",we,[ye,i(t("input",{type:"number","onUpdate:modelValue":r[12]||(r[12]=n=>e.newInterfaceFrequency=n),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},null,512),[[d,e.newInterfaceFrequency]]),t("div",Ie,f(b.formatFrequency(e.newInterfaceFrequency)),1)])):c("",!0),e.newInterfaceType==="RNodeInterface"?(o(),s("div",he,[xe,i(t("select",{"onUpdate:modelValue":r[13]||(r[13]=n=>e.newInterfaceBandwidth=n),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},[(o(!0),s(m,null,p(e.RNodeInterfaceDefaults.bandwidths,n=>(o(),s("option",{value:n},f(n/1e3)+" KHz",9,_e))),256))],512),[[g,e.newInterfaceBandwidth]])])):c("",!0),e.newInterfaceType==="RNodeInterface"?(o(),s("div",ve,[Te,i(t("input",{"onUpdate:modelValue":r[14]||(r[14]=n=>e.newInterfaceTxpower=n),type:"number",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},null,512),[[d,e.newInterfaceTxpower]])])):c("",!0),e.newInterfaceType==="RNodeInterface"?(o(),s("div",ke,[Pe,i(t("select",{"onUpdate:modelValue":r[15]||(r[15]=n=>e.newInterfaceSpreadingFactor=n),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},[(o(!0),s(m,null,p(e.RNodeInterfaceDefaults.spreadingfactors,n=>(o(),s("option",{value:n},f(n),9,Ce))),256))],512),[[g,e.newInterfaceSpreadingFactor]])])):c("",!0),e.newInterfaceType==="RNodeInterface"?(o(),s("div",Fe,[Ne,i(t("select",{"onUpdate:modelValue":r[16]||(r[16]=n=>e.newInterfaceCodingRate=n),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"},[(o(!0),s(m,null,p(e.RNodeInterfaceDefaults.codingrates,n=>(o(),s("option",{value:n},"4:"+f(n),9,Ue))),256))],512),[[g,e.newInterfaceCodingRate]])])):c("",!0),t("button",{onClick:r[17]||(r[17]=(...n)=>b.addInterface&&b.addInterface(...n)),type:"button",class:"bg-green-500 hover:bg-green-400 focus-visible:outline-green-500 my-auto inline-flex items-center gap-x-1 rounded-md p-2 text-sm font-semibold text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2"},[e.isEditingInterface?(o(),s("span",Re,"Save Interface")):(o(),s("span",Se,"Add Interface"))])])])])])}const qe=y(v,[["render",Ve]]);export{qe as default};
